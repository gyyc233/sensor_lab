- [IMU](#imu)
  - [IMU误差模型](#imu误差模型)
    - [艾伦allan标定法与标定工具](#艾伦allan标定法与标定工具)
  - [IMU选型](#imu选型)
  - [VIO中的IMU模型](#vio中的imu模型)
- [RTK](#rtk)
  - [rtk 精度评价](#rtk-精度评价)
  - [rtk与imu](#rtk与imu)
  - [参考文章](#参考文章)

# IMU

IMU 惯性测量单元(Inertial Measurement Unit) 是测量物体三轴角速度和加速度的设备

- 6轴IMU 在正交的三轴上安装陀螺仪和加速度计，共6个自由度，来测量物体在三维空间的角速度和加速度
- IMU可在加速度计和陀螺仪的基础上加入磁力计，称为9轴IMU

> - 加速度计：检测载体坐标系统独立三轴的加速度信号；
> - 陀螺仪：检测载体相对于导航坐标系的角速度信号；
> - 磁力计：用卡尔曼或者互补滤波等算法为用户提供拥有绝对参考的俯仰角、横滚角和航向角

增加了磁力计的9轴传感器又被称为AHRS 航姿参考系统(Attitude and Heading Reference System)。因为航向角有地磁场的参考，所以不会漂移，但地磁场很微弱，经常受到周围带磁场物体的干扰。

磁场和重力场越正交，则航姿测量效果越好，也就是说如果磁场和重力场平行，比如地磁南北极，AHRS就没法使用。

## IMU误差模型

加速度计和陀螺仪的误差可以分为：确定性误差，随机误差

- 确定性误差
  - 加速度偏置bias-->当没有外部作用时，IMU传感器的输出应该为0。但是实际数据中存在一个零偏b,这个偏置在三个轴上都存在，是一个三维的偏置.随着时间的增加，该偏置对速度和位移计算结果的影响会随着积分时间的增加而越来越大
  - 比例-->从传感器测量到输出数据，要经过ADC，数据转换中导致实际输出数据略小于测量数据
  - 轴间不垂直 Nonorthogonality/Misalignment Errors
  - 温度补偿, 对传感器估计的 bias 和 scale 进行温度补偿，获取不同温度时 bias 和 scale 的值，绘制成曲线

确定性误差可以使用６面法分别标定加速度计和陀螺仪

随机噪声

- 高斯白噪声, 测量噪声是AD转换器件引起的外部噪声，波动激烈的测量白噪声
- 随机游走(零偏bias) 随机游走噪声，是传感器内部机械、温度等各种物理因素产生的传感器内部误差的综合参数，是变化缓慢的bias

### 艾伦allan标定法与标定工具

- imu_utils：imu误差标定
- kalibr_allan：相机与imu联合标定
- imu_tk


## IMU选型

- 航海级和导航级惯导系统：大型、准确且昂贵

航海级惯导系统是商用最高级别的传感器，用于船舶、潜艇，偶尔用于航天器上。该系统可提供漂移小于1.8km/天的无辅助导航解决方案。这些传感器的成本高达100万美元。

导航级惯导系统的性能略低于航海级惯导系统，通常用于商用客机和军用飞机。其漂移量小于1.5km/h，其价格高达10万美元。

- 战术级和工业级惯性传感器：对于主力应用价值很高

战术级和工业级传感器是这三类传感器中最为多样化的，可解决各种性能和成本情况，其市场机遇是巨大的。该类别用于许多需要以较低成本获得高性能数据以实现大量生产的应用，常见于自动割草机、送货机器人、无人机、农业机器人、移动工业机器人和自主航行船舶。虽然成本较低，但购买者需要在准确性、性能、尺寸和质量方面付出代价

- 汽车级和消费级传感器：商品应用

在商业市场上，IMU的最低等级被称为汽车级。这些传感器通常以单独的加速度计或陀螺仪的形式出售。许多公司已经开始将来自不同制造商的多个加速计和陀螺仪结合起来，以创建独立的IMU单元。即使与GPS等其他导航系统集成在一起，汽车级IMU也不够精确，不足以用于惯性导航。这些传感器常用于悬架系统、安全气囊、防抱死制动系统、娱乐系统和其他类似应用


## VIO中的IMU模型

在ENU坐标系中，忽略尺度因子（scale）的影响，只考虑白噪声和 bias随机游走


# RTK

Real-Time Kinematic，实时动态差分,工作状态主要分为固定解与非固定解，处于一种精度够用，但稳定性很难控制的状态。从其他角度看，GNSS 本质上可以看成一种高精度的授时系统

1. 方案分单天线与双天线，双天线方案天然可以大概测量方位角，但是不准
2. RTK 的测量值不能直接使用，需要通过转换程序（开源的 utm_convert 库函数）将 RTK 测量值中的经纬度信息转换为米制的 UTM 坐标系下的 东北天坐标系（将正东视为 X 轴，正北视为 Y 轴，按照右手坐标系，Z 轴应该指向天空） 或者 北东地坐标系

## rtk 精度评价

- rtk测量的平移分量 x y 部分数据精度较高，z精度通常不如水平
- rtk测量的姿态r相比位置t更加不稳定

## rtk与imu

rtk与imu在一些方面具有互补性

1. IMU 有累积误差，但是没有位姿跳变，RTK 没有累积误差，但受干扰或遮挡时会跳变。二者融合，既能消除累积误差，又能避免跳变
2. IMU 测量做航推算时，姿态R精度较高，rtk计算的t精度较高


## 参考文章

- [IMU原理与介绍](https://blog.csdn.net/QLeelq/article/details/112985306)
