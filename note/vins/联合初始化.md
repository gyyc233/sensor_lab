- [vins mono 联合初始化](#vins-mono-联合初始化)
  - [纯视觉SfM初始化](#纯视觉sfm初始化)
  - [视觉与imu对齐](#视觉与imu对齐)
  - [重定位与优化](#重定位与优化)
- [关键技术点](#关键技术点)
  - [陀螺仪零偏校准](#陀螺仪零偏校准)
  - [速度 重力 尺度初始化](#速度-重力-尺度初始化)
  - [重力细化](#重力细化)
- [存在哪些问题](#存在哪些问题)

# vins mono 联合初始化

通过融合视觉和IMU数据来建立系统的初始状态

## 纯视觉SfM初始化

1. 使用滑动窗口中的特征点进行纯视觉结构恢复
2. 对极几何计算初始帧间运动
3. 使用PnP方法估计后续帧位姿
4. 通过三角化恢复特征点3D位置
5. 执行全局BA优化

## 视觉与imu对齐

1. 陀螺仪偏置校准：通过视觉旋转与IMU预积分旋转对齐来估计陀螺仪偏置
2. 速度、重力向量和尺度初始化：通过线性对齐求解
3. 加速度计偏置校准：通过优化重力向量来估计

## 重定位与优化

1. 将视觉SfM结果与IMU预积分结果进行联合优化
2. 优化变量包括所有帧的位姿、速度、IMU偏置和重力向量
3. 恢复绝对尺度（纯视觉SfM的尺度是不确定的）,恢复后还是会存在尺度漂移

# 关键技术点

## 陀螺仪零偏校准

最小化视觉SfM得到的相对旋转与IMU预积分得到的相对旋转

## 速度 重力 尺度初始化

通过构建线性方程组求解

```
z_bk+1_bk = α_bk+1_bk + R_bk_w * g_w * Δt = R_bk_c * (s * p_c_bk+1 - p_c_bk)
```

- z_bk+1_bk 是IMU预积分的位置项
- α_bk+1_bk 是IMU预积分的位置变化
- R_bk_w 是世界到k帧的旋转
- g_w 是世界坐标系下的重力向量
- p_c_bk 是视觉SfM得到的位置

## 重力细化

初始重力估计可能不够精确,通过以下步骤细化

- 将重力向量参数化为2个自由度（在切线空间表示）
- 与尺度、速度一起进行优化

# 存在哪些问题

- 视觉惯性初始化依赖于足够的视差和IMU激励来观测所有状态变量
- 尺度漂移
- 在段时间初始化阶段,imu零偏估计不准
- 相机与IMU之间的时间戳同步误差
