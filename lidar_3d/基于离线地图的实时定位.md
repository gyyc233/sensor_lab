- [基于离线点云地图的实时定位](#基于离线点云地图的实时定位)
- [点云融合定位的设计方案](#点云融合定位的设计方案)
- [小结](#小结)
- [reference](#reference)

# 基于离线点云地图的实时定位

在点云地图基础之上，我们可以把当前激光扫描数据与地图进行匹配，从而获得车辆自身的位置，再与 IMU 等传感器进行滤波器融合

- 然而，点云定位并不像 RTK 那样可以直接给出物理世界坐标，而必须先给出一个大致的位置点，再引导点云配准算法收敛
- 因此，点云定位在实际使用时，会遇到一些特有逻辑问题，以下演示一个基于ESKF的实时定位方案

# 点云融合定位的设计方案

从融合手段上来看，点云融合定位可以与传统组合导航一样，使用 ESKF 进行融合；也可以像现有的 SLAM 系统一样，使用位姿图优化进行融合

1. 卡尔曼方案从设计到实现都比较简单，其结果往往比较光滑，但可能收敛到错误的解，导致定位跑偏，而且不容易被修正回来
2. 图优化方法容易检查各种因子与定位状态的偏差，从而在逻辑层面处理各种异常情况，但其定位平滑性不容易保障（除非进行手动的边缘化处理，或者使用 GTSAM 这种自带边缘化的优化库）


# 小结

在已有激光点云地图的基础上，进行融合定位的案例。点云定位的几个优势和劣势可以概括如下

1. 点云定位结果与场景结构相关，而与天气、遮挡关系无关，通常比 RTK 具有更好的环境适应性。点云定位既可以用于室外，也可以用于室内，没有太多限制因素
2. 点云定位结果可以和 RTK 一样，融入 ESKF 滤波器中，也可以组成一个图优化系统
3. 如果在较大的场景中使用，应该先对地图点云切分，每次加载周围一小块区域用于定位
4. 与 RTK 不同的时，点云定位需要事先指定一个大致的位置，而不是像 RTK 那直接给出定位结果。如果初始位置精度不够，我们还需要对附近的位置和角度进行网格搜索，才能确定自身位置。
5. 点云定位对动态场景有一定的适应性。只要主体结构（通常是建筑物）变化不大，一些小型的动态物体（人群、车辆等等）通常不会对点云定位产生很大的干扰
6. 如果定位场景属于开阔场地，我们还可以对点云地图进行压缩，形成 2.5D 地图 。这种压缩之后的地图可以大幅减少所需的存储空间，对自动驾驶应用更加友好

# reference

- [自动驾驶车辆的实时定位系统](https://blog.csdn.net/m0_49384824/article/details/145149503)
